<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="Content-Style-Type" content="text/css">
  <title></title>
  <meta name="Generator" content="Cocoa HTML Writer">
  <meta name="CocoaVersion" content="1894.6">
  <style type="text/css">
    p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #819090; background-color: #fcf4dc}
    p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #819090; background-color: #fcf4dc; min-height: 17.0px}
    p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #269286; background-color: #fcf4dc}
    p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #269286; background-color: #fcf4dc; min-height: 17.0px}
    p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #475b62; background-color: #fcf4dc; min-height: 17.0px}
    p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #475b62; background-color: #fcf4dc}
    p.p7 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #a57706; background-color: #fcf4dc}
    p.p8 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #c61c6f; background-color: #fcf4dc}
    p.p9 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #595ab7; background-color: #fcf4dc; min-height: 17.0px}
    p.p10 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #536870; background-color: #fcf4dc}
    p.p11 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #2176c7; background-color: #fcf4dc}
    p.p12 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #595ab7; background-color: #fcf4dc}
    p.p13 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #738a05; background-color: #fcf4dc}
    p.p14 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #bd3613; background-color: #fcf4dc}
    p.p15 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #bd3613; background-color: #fcf4dc; min-height: 17.0px}
    p.p16 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #738a05; background-color: #fcf4dc; min-height: 17.0px}
    p.p17 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Courier; color: #8c8c8c; background-color: #fcf4dc}
    span.s1 {color: #475b62}
    span.s2 {color: #269286}
    span.s3 {color: #819090}
    span.s4 {color: #536870}
    span.s5 {color: #c61c6f}
    span.s6 {color: #a57706}
    span.s7 {color: #595ab7}
    span.s8 {color: #bd3613}
    span.s9 {color: #2176c7}
    span.s10 {color: #16abad}
    span.s11 {color: #a57705}
  </style>
</head>
<body>
<p class="p1"><i>/**</i></p>
<p class="p1"><i><span class="Apple-converted-space"> </span>* Scala 3, "Quiet" syntax<span class="Apple-converted-space">   </span></i></p>
<p class="p1"><i><span class="Apple-converted-space"> </span>*/</i></p>
<p class="p2"><i></i><br></p>
<p class="p1"><b>if </b><span class="s1">x &lt; </span><span class="s2">0 </span><b>then</b></p>
<p class="p3"><span class="s3"><b><span class="Apple-converted-space">  </span></b></span>"negative"</p>
<p class="p1"><b>else if </b><span class="s1">x == </span><span class="s2">0 </span><b>then</b></p>
<p class="p3"><span class="s3"><b><span class="Apple-converted-space">  </span></b></span>"zero"</p>
<p class="p1"><b>else</b></p>
<p class="p3"><span class="s3"><b><span class="Apple-converted-space">  </span></b></span>"positive"</p>
<p class="p4"><br></p>
<p class="p1"><b>if </b><span class="s1">x &lt; </span><span class="s2">0 </span><b>then </b><span class="s1">-x </span><b>else </b><span class="s1">x</span></p>
<p class="p5"><br></p>
<p class="p6"><span class="s3"><b>while </b></span>x &gt;= <span class="s2">0 </span><span class="s3"><b>do </b></span>x = f(x)</p>
<p class="p5"><br></p>
<p class="p6"><span class="s3"><b>for </b></span>x &lt;- xs <span class="s3"><b>if </b></span>x &gt; <span class="s2">0</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span></span><b>yield </b><span class="s1">x * x</span></p>
<p class="p5"><br></p>
<p class="p1"><b>for</b></p>
<p class="p6">x &lt;- xs</p>
<p class="p6">y &lt;- ys</p>
<p class="p1"><b>do</b></p>
<p class="p6"><span class="s3"><b><span class="Apple-converted-space">  </span></b></span><span class="s4"><i>println</i></span>(x + y)</p>
<p class="p5"><br></p>
<p class="p6"><span class="s3"><b>try </b></span>body</p>
<p class="p6"><span class="s3"><b>catch case </b></span><span class="s5">ex</span>: <span class="s6">IOException </span>=&gt; handle()</p>
<p class="p5"><br></p>
<p class="p1"><i>/**<span class="Apple-converted-space"> </span></i></p>
<p class="p1"><i><span class="Apple-converted-space"> </span>* Scala 3, new keyword is optional</i></p>
<p class="p1"><i><span class="Apple-converted-space"> </span>*/</i></p>
<p class="p7"><span class="s3"><b>class </b></span>ImEasyToInstantiate<span class="s1">(</span><span class="s7">name</span><span class="s1">: </span><span class="s8">String</span><span class="s1">) {</span></p>
<p class="p6"><span class="Apple-converted-space">  </span><span class="s3"><b>def </b></span><span class="s9">hello</span>(): <span class="s8">Unit </span>= <span class="s4"><i>println</i></span>(<span class="s9">s</span><span class="s2">"hello </span><span class="s10"><b>$</b></span><span class="s7">name</span><span class="s2">"</span>)</p>
<p class="p6">}</p>
<p class="p5"><br></p>
<p class="p6">ImEasyToInstantiate(<span class="s2">"universal apply methods"</span>).hello()</p>
<p class="p5"><br></p>
<p class="p5"><br></p>
<p class="p1"><i>/**</i></p>
<p class="p1"><i><span class="Apple-converted-space"> </span>* Scala 3, heavily revised implicits</i></p>
<p class="p1"><i><span class="Apple-converted-space"> </span>*/</i></p>
<p class="p2"><i></i><br></p>
<p class="p1"><b>trait </b><span class="s6">Ord</span><span class="s1">[</span><span class="s9">T</span><span class="s1">]:</span></p>
<p class="p6"><span class="Apple-converted-space">  </span><span class="s3"><b>def </b></span><span class="s9">compare</span>(<span class="s7">x</span>: <span class="s9">T</span>, <span class="s7">y</span>: <span class="s9">T</span>): <span class="s8">Int</span></p>
<p class="p6"><span class="s8"><span class="Apple-converted-space">  </span></span><span class="s3"><b>extension </b></span>(<span class="s7">x</span>: <span class="s9">T</span>) <span class="s3"><b>def </b></span><span class="s9">&lt; </span>(<span class="s7">y</span>: <span class="s9">T</span>) = <span class="s9">compare</span>(x, <span class="s7">y</span>) &lt; <span class="s2">0</span></p>
<p class="p6"><span class="s2"><span class="Apple-converted-space">  </span></span><span class="s3"><b>extension </b></span>(<span class="s7">x</span>: <span class="s9">T</span>) <span class="s3"><b>def </b></span><span class="s9">&gt; </span>(<span class="s7">y</span>: <span class="s9">T</span>) = <span class="s9">compare</span>(x, <span class="s7">y</span>) &gt; <span class="s2">0</span></p>
<p class="p4"><br></p>
<p class="p6"><span class="s3"><b>given </b></span>intOrd: Ord[<span class="s8">Int</span>] <span class="s3"><b>with</b></span></p>
<p class="p6"><span class="s3"><b><span class="Apple-converted-space">  </span>def </b></span><span class="s9">compare</span>(<span class="s7">x</span>: <span class="s8">Int</span>, <span class="s7">y</span>: <span class="s8">Int</span>) =</p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">    </span></span><b>if </b><span class="s7">x </span><span class="s1">&lt; </span><span class="s7">y </span><b>then </b><span class="s1">-</span><span class="s2">1 </span><b>else if </b><span class="s7">x </span><span class="s1">&gt; </span><span class="s7">y </span><b>then </b><span class="s1">+</span><span class="s2">1 </span><b>else </b><span class="s2">0</span></p>
<p class="p4"><br></p>
<p class="p6"><span class="s3"><b>given </b></span>[T](<span class="s3"><b>using </b></span>ord: <span class="s6">Ord</span>[T]): Ord[<span class="s8">List</span>[T]] <span class="s3"><b>with</b></span></p>
<p class="p6"><span class="s3"><b><span class="Apple-converted-space">  </span>def </b></span><span class="s9">compare</span>(<span class="s7">xs</span>: <span class="s8">List</span>[T], <span class="s7">ys</span>: <span class="s8">List</span>[T]): <span class="s8">Int </span>= (<span class="s7">xs</span>, <span class="s7">ys</span>) <span class="s3"><b>match</b></span></p>
<p class="p1"><b><span class="Apple-converted-space">    </span>case </b><span class="s1">(</span><span class="s4"><b><i>Nil</i></b></span><span class="s1">, </span><span class="s4"><b><i>Nil</i></b></span><span class="s1">) =&gt; </span><span class="s2">0</span></p>
<p class="p6"><span class="s2"><span class="Apple-converted-space">    </span></span><span class="s3"><b>case </b></span>(<span class="s4"><b><i>Nil</i></b></span>, _) =&gt; -<span class="s2">1</span></p>
<p class="p6"><span class="s2"><span class="Apple-converted-space">    </span></span><span class="s3"><b>case </b></span>(_, <span class="s4"><b><i>Nil</i></b></span>) =&gt; +<span class="s2">1</span></p>
<p class="p8"><span class="s2"><span class="Apple-converted-space">    </span></span><span class="s3"><b>case </b></span><span class="s1">(</span>x <span class="s4"><i>:: </i></span>xs1<span class="s1">, </span>y <span class="s4"><i>:: </i></span>ys1<span class="s1">) =&gt;</span></p>
<p class="p6"><span class="Apple-converted-space">      </span><span class="s3"><b>val </b></span>fst = ord.compare(<span class="s5">x</span>, <span class="s5">y</span>)</p>
<p class="p6"><span class="Apple-converted-space">      </span><span class="s3"><b>if </b></span>fst != <span class="s2">0 </span><span class="s3"><b>then </b></span>fst <span class="s3"><b>else </b></span>compare(<span class="s5">xs1</span>, <span class="s5">ys1</span>)</p>
<p class="p5"><br></p>
<p class="p6"><span class="s3"><b>def </b></span><span class="s9">max</span>[<span class="s9">T</span>](<span class="s7">x</span>: <span class="s9">T</span>, <span class="s7">y</span>: <span class="s9">T</span>)(<span class="s3"><b>using </b></span><span class="s7">ord</span>: <span class="s6">Ord</span>[<span class="s9">T</span>]): <span class="s9">T </span>=</p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">  </span></span><b>if </b><span class="s7">ord</span><span class="s1">.</span><span class="s9">compare</span><span class="s1">(</span><span class="s7">x</span><span class="s1">, </span><span class="s7">y</span><span class="s1">) &lt; </span><span class="s2">0 </span><b>then </b><span class="s7">y </span><b>else </b><span class="s7">x</span></p>
<p class="p9"><br></p>
<p class="p6"><span class="s3"><b>val </b></span>maxInt = max(<span class="s2">1</span>, <span class="s2">2</span>)(<span class="s3"><b>using </b></span>intOrd)</p>
<p class="p6"><span class="s3"><b>val </b></span>maxList = max(<span class="s4"><b><i>List</i></b></span>(<span class="s2">1</span>, <span class="s2">2</span>), <span class="s4"><b><i>List</i></b></span>(<span class="s2">1</span>, <span class="s2">3</span>))</p>
<p class="p5"><br></p>
<p class="p5"><br></p>
<p class="p5"><br></p>
<p class="p1"><i>/**</i></p>
<p class="p1"><i><span class="Apple-converted-space"> </span>* Scala 3, Optional braces</i></p>
<p class="p1"><i><span class="Apple-converted-space"> </span>*/</i></p>
<p class="p2"><i></i><br></p>
<p class="p1"><b>package </b><span class="s1">p1.p2:</span></p>
<p class="p5"><br></p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">  </span></span><b>abstract class </b><span class="s6">C</span><span class="s1">():</span></p>
<p class="p5"><span class="Apple-converted-space">  </span></p>
<p class="p6"><span class="Apple-converted-space">    </span><span class="s3"><b>def this</b></span>(<span class="s7">x</span>: <span class="s8">Int</span>) =</p>
<p class="p6"><span class="Apple-converted-space">      </span><span class="s3"><b>this</b></span>()</p>
<p class="p6"><span class="Apple-converted-space">      </span><span class="s3"><b>if </b></span>x &gt; <span class="s2">0 </span><span class="s3"><b>then</b></span></p>
<p class="p1"><b><span class="Apple-converted-space">        </span>val </b><span class="s1">a </span><span class="s4"><i>:: </i></span><span class="s1">b =</span></p>
<p class="p6"><span class="Apple-converted-space">          </span>x <span class="s9">:: </span><span class="s4"><b><i>Nil</i></b></span></p>
<p class="p10"><b><i><span class="Apple-converted-space">        </span></i></b><span class="s1">end </span><span class="s3"><b>val</b></span></p>
<p class="p1"><b><span class="Apple-converted-space">        </span>var </b><span class="s4"><b><i>y </i></b></span><span class="s1">=</span></p>
<p class="p6"><span class="Apple-converted-space">        </span>x</p>
<p class="p6"><span class="Apple-converted-space">        </span>end y</p>
<p class="p6"><span class="Apple-converted-space">        </span><span class="s3"><b>while </b></span><span class="s4"><b><i>y </i></b></span>&gt; <span class="s2">0 </span><span class="s3"><b>do</b></span></p>
<p class="p1"><b><span class="Apple-converted-space">          </span></b><span class="s4"><i>println</i></span><span class="s1">(</span><span class="s4"><b><i>y</i></b></span><span class="s1">)</span></p>
<p class="p6"><span class="Apple-converted-space">          </span><span class="s4"><b><i>y </i></b></span>-= <span class="s2">1</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span></span><b>end while</b></p>
<p class="p1"><b><span class="Apple-converted-space">        </span>try</b></p>
<p class="p1"><b><span class="Apple-converted-space">          </span></b><span class="s1">x </span><b>match</b></p>
<p class="p1"><b><span class="Apple-converted-space">            </span>case </b><span class="s2">0 </span><span class="s1">=&gt; </span><span class="s4"><i>println</i></span><span class="s1">(</span><span class="s2">"0"</span><span class="s1">)</span></p>
<p class="p6"><span class="Apple-converted-space">            </span><span class="s3"><b>case </b></span>_ =&gt;</p>
<p class="p6"><span class="Apple-converted-space">          </span><span class="s3"><b>end match</b></span></p>
<p class="p1"><b><span class="Apple-converted-space">        </span>finally</b></p>
<p class="p1"><b><span class="Apple-converted-space">          </span></b><span class="s4"><i>println</i></span><span class="s1">(</span><span class="s2">"done"</span><span class="s1">)</span></p>
<p class="p6"><span class="Apple-converted-space">        </span><span class="s3"><b>end try</b></span></p>
<p class="p1"><b><span class="Apple-converted-space">      </span>end if</b></p>
<p class="p1"><b><span class="Apple-converted-space">    </span></b><span class="s1">end </span><b>this</b></p>
<p class="p2"><b><span class="Apple-converted-space">  </span></b></p>
<p class="p1"><b><span class="Apple-converted-space">    </span>def </b><span class="s9">f</span><span class="s1">: </span><span class="s8">String</span></p>
<p class="p1"><span class="s8"><span class="Apple-converted-space">  </span></span><b>end </b><span class="s1">C</span></p>
<p class="p5"><br></p>
<p class="p6">end p2</p>
<p class="p5"><br></p>
<p class="p1"><i>/**</i></p>
<p class="p1"><i><span class="Apple-converted-space">  </span>* Scala 3, enums</i></p>
<p class="p1"><i><span class="Apple-converted-space">  </span>*/</i></p>
<p class="p2"><i></i><br></p>
<p class="p6"><span class="s3"><b>enum </b></span>Color {</p>
<p class="p6"><span class="Apple-converted-space">  </span><span class="s3"><b>case </b></span>Red, Green, Blue</p>
<p class="p6">}</p>
<p class="p5"><br></p>
<p class="p1"><i>/**</i></p>
<p class="p1"><i><span class="Apple-converted-space"> </span>* Scala 3, implicit conversions</i></p>
<p class="p1"><i><span class="Apple-converted-space"> </span>*/</i></p>
<p class="p2"><i></i><br></p>
<p class="p1"><b>case class </b><span class="s6">Token</span><span class="s1">(</span><span class="s7">value</span><span class="s1">: </span><span class="s8">String</span><span class="s1">)</span></p>
<p class="p5"><br></p>
<p class="p1"><b>object </b><span class="s1">Token:</span></p>
<p class="p6"><span class="Apple-converted-space">  </span><span class="s3"><b>given </b></span>fromInt: Conversion[<span class="s8">Int</span>, <span class="s6">Token</span>] <span class="s3"><b>with</b></span></p>
<p class="p11"><span class="s3"><b><span class="Apple-converted-space">    </span>def </b></span>apply<span class="s1">(</span><span class="s7">int</span><span class="s1">: </span><span class="s8">Int</span><span class="s1">): </span><span class="s6">Token </span><span class="s1">= </span><span class="s4"><i>Token</i></span><span class="s1">(</span><span class="s7">int</span><span class="s1">.</span>toString<span class="s1">)</span></p>
<p class="p5"><br></p>
<p class="p6"><span class="Apple-converted-space">  </span><span class="s3"><b>given </b></span>fromString: Conversion[<span class="s8">String</span>, <span class="s6">Token</span>] = Token(_)</p>
<p class="p6"><span class="s3"><b>end </b></span>Token</p>
<p class="p5"><br></p>
<p class="p12"><span class="s3"><b>def </b></span><span class="s9">feedMeToken</span><span class="s1">(</span>token<span class="s1">: </span><span class="s6">Token</span><span class="s1">) = </span><span class="s4"><i>println</i></span><span class="s1">(</span><span class="s9">s</span><span class="s2">"Mmmm, I like </span><span class="s10"><b>$</b></span><span class="s1">{</span>token<span class="s1">.</span>value<span class="s1">}</span><span class="s2">"</span><span class="s1">)</span></p>
<p class="p5"><br></p>
<p class="p13">@main <span class="s3"><b>def </b></span><span class="s9">hello</span><span class="s1">: </span><span class="s8">Unit </span><span class="s1">= {</span></p>
<p class="p6"><span class="Apple-converted-space">  </span><span class="s4"><i>println</i></span>(Token.fromInt(<span class="s2">1</span>))</p>
<p class="p5"><br></p>
<p class="p10"><span class="s1"><span class="Apple-converted-space">  </span></span><span class="s3"><b>import </b></span><span class="s1">scala.language.</span><b><i>implicitConversions</i></b></p>
<p class="p6"><span class="s4"><b><i><span class="Apple-converted-space">  </span></i></b></span>feedMeToken(<span class="s2">1</span>)</p>
<p class="p6">}</p>
<p class="p5"><br></p>
<p class="p1"><i>/**</i></p>
<p class="p1"><i><span class="Apple-converted-space"> </span>* Opaque types</i></p>
<p class="p1"><i><span class="Apple-converted-space"> </span>*/</i></p>
<p class="p2"><i></i><br></p>
<p class="p6"><span class="s3"><b>object </b></span>Nodes {</p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">  </span></span><b>opaque type </b><span class="s8">NodeId </span><span class="s1">= </span><span class="s8">Long</span></p>
<p class="p14"><span class="Apple-converted-space">  </span><span class="s3"><b>type </b></span>LongTypeAlias <span class="s1">= </span>Long</p>
<p class="p15"><br></p>
<p class="p6"><span class="s8"><span class="Apple-converted-space">  </span></span><span class="s3"><b>object </b></span>NodeId {</p>
<p class="p6"><span class="Apple-converted-space">    </span><span class="s3"><b>def </b></span><span class="s9">apply</span>(<span class="s7">id</span>: <span class="s8">Long</span>): <span class="s8">NodeId </span>= <span class="s7">id</span></p>
<p class="p14"><span class="s7"><span class="Apple-converted-space">    </span></span><span class="s3"><b>def </b></span><span class="s9">safe</span><span class="s1">(</span><span class="s7">id</span><span class="s1">: </span>Long<span class="s1">): </span>NodeId <span class="s1">= </span><span class="s7">id</span></p>
<p class="p12"><span class="Apple-converted-space">  </span><span class="s1">}</span></p>
<p class="p5"><span class="Apple-converted-space">  </span></p>
<p class="p6">}</p>
<p class="p5"><br></p>
<p class="p6"><span class="s3"><b>val </b></span>nodeIdOne: Nodes.<span class="s8">NodeId </span>= Nodes.<span class="s4"><i>NodeId</i></span>(<span class="s2">1</span>)</p>
<p class="p5"><br></p>
<p class="p1"><b>val </b><span class="s1">nodeIdTwo: Nodes.</span><span class="s8">LongTypeAlias </span><span class="s1">= </span><span class="s2">2 </span><i>// Will not work with opaque type</i></p>
<p class="p1"><b>val </b><span class="s1">y = nodeIdTwo * </span><span class="s2">2 </span><i>// Will also not work with opaque types</i></p>
<p class="p2"><i></i><br></p>
<p class="p2"><i></i><br></p>
<p class="p1"><i>/**</i></p>
<p class="p1"><i><span class="Apple-converted-space">  </span>* Scala 3, union types</i></p>
<p class="p1"><i><span class="Apple-converted-space">  </span>*/</i></p>
<p class="p2"><i></i><br></p>
<p class="p14"><span class="s3"><b>def </b></span><span class="s9">biCurious</span><span class="s1">(</span><span class="s7">input</span><span class="s1">: </span>String <span class="s1">| </span>Int<span class="s1">): </span>Unit <span class="s1">= {</span></p>
<p class="p12"><span class="s1"><span class="Apple-converted-space">  </span></span>input <span class="s3"><b>match </b></span><span class="s1">{</span></p>
<p class="p3"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s3"><b>case </b></span><span class="s5">s</span><span class="s1">: </span><span class="s8">String </span><span class="s1">=&gt; </span><span class="s4"><i>println</i></span><span class="s1">(</span><span class="s9">s</span>"I like strings like this <span class="s10"><b>$</b></span><span class="s5">s</span>"<span class="s1">)</span></p>
<p class="p3"><span class="s1"><span class="Apple-converted-space">    </span></span><span class="s3"><b>case </b></span><span class="s5">i</span><span class="s1">: </span><span class="s8">Int </span><span class="s1">=&gt; </span><span class="s4"><i>println</i></span><span class="s1">(</span><span class="s9">s</span>"Ints are also my cup of tea <span class="s10"><b>$</b></span><span class="s5">i</span>"<span class="s1">)</span></p>
<p class="p6"><span class="Apple-converted-space">  </span>}</p>
<p class="p6">}</p>
<p class="p5"><br></p>
<p class="p6"><span class="s3"><b>val </b></span>a = biCurious(<span class="s2">1</span>)</p>
<p class="p6"><span class="s3"><b>val </b></span>b = biCurious(<span class="s2">"a"</span>)</p>
<p class="p5"><br></p>
<p class="p5"><br></p>
<p class="p1"><i>/**</i></p>
<p class="p1"><i><span class="Apple-converted-space"> </span>* Scala 3, intersection types</i></p>
<p class="p1"><i><span class="Apple-converted-space"> </span>*/</i></p>
<p class="p2"><i></i><br></p>
<p class="p7"><span class="s3"><b>trait </b></span>EatCake <span class="s1">{</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">  </span></span><span class="s3"><b>def </b></span>eatCake<span class="s1">(): </span><span class="s8">Unit</span></p>
<p class="p6">}</p>
<p class="p5"><br></p>
<p class="p7"><span class="s3"><b>trait </b></span>KeepCake <span class="s1">{</span></p>
<p class="p11"><span class="s1"><span class="Apple-converted-space">  </span></span><span class="s3"><b>def </b></span>keepCake<span class="s1">(): </span><span class="s8">Unit</span></p>
<p class="p6">}</p>
<p class="p5"><br></p>
<p class="p7"><span class="s3"><b>def </b></span><span class="s9">wantsItAll</span><span class="s1">(</span><span class="s7">input</span><span class="s1">: </span>EatCake <span class="s1">&amp; </span>KeepCake<span class="s1">): </span><span class="s8">Unit </span><span class="s1">= {</span></p>
<p class="p6"><span class="Apple-converted-space">  </span><span class="s7">input</span>.eatCake()</p>
<p class="p6"><span class="Apple-converted-space">  </span><span class="s7">input</span>.keepCake()</p>
<p class="p6">}</p>
<p class="p5"><br></p>
<p class="p1"><i>/**</i></p>
<p class="p1"><i><span class="Apple-converted-space"> </span>* Scala 3, dependent function types<span class="Apple-converted-space"> </span></i></p>
<p class="p1"><i><span class="Apple-converted-space"> </span>*/</i></p>
<p class="p2"><i></i><br></p>
<p class="p7"><span class="s3"><b>trait </b></span>Entity <span class="s1">{</span></p>
<p class="p14"><span class="s1"><span class="Apple-converted-space">  </span></span><span class="s3"><b>type </b></span>IdType</p>
<p class="p14"><span class="Apple-converted-space">  </span><span class="s3"><b>def </b></span><span class="s9">id</span><span class="s1">: </span>IdType</p>
<p class="p6">}</p>
<p class="p5"><br></p>
<p class="p6"><span class="s3"><b>object </b></span>Entity {</p>
<p class="p1"><span class="s1"><span class="Apple-converted-space">  </span></span><b>def </b><span class="s9">extractId</span><span class="s1">(</span><span class="s7">e</span><span class="s1">: </span><span class="s6">Entity</span><span class="s1">): </span><span class="s7">e</span><span class="s1">.</span><span class="s8">IdType </span><span class="s1">= </span><span class="s7">e</span><span class="s1">.</span><span class="s9">id </span><i>// Since Scala 2</i></p>
<p class="p1"><i><span class="Apple-converted-space">  </span></i><b>val </b><span class="s4"><b><i>extractor</i></b></span><span class="s1">: (</span><span class="s7">e</span><span class="s1">: </span><span class="s6">Entity</span><span class="s1">) =&gt; e.IdType = </span><span class="s4"><i>extractId </i></span><i>// New in Scala 3</i></p>
<p class="p6">}</p>
<p class="p5"><br></p>
<p class="p1"><b>class </b><span class="s6">Node</span><span class="s1">(</span><b>val </b><span class="s7">id</span><span class="s1">: </span><span class="s8">Long</span><span class="s1">) </span><b>extends </b><span class="s6">Entity </span><span class="s1">{</span></p>
<p class="p14"><span class="s1"><span class="Apple-converted-space">  </span></span><span class="s3"><b>type </b></span>IdType <span class="s1">= </span>Long</p>
<p class="p6">}</p>
<p class="p5"><br></p>
<p class="p1"><b>class </b><span class="s6">NodeLabel</span><span class="s1">(</span><b>val </b><span class="s7">id</span><span class="s1">: </span><span class="s8">Int</span><span class="s1">) </span><b>extends </b><span class="s6">Entity </span><span class="s1">{</span></p>
<p class="p14"><span class="s1"><span class="Apple-converted-space">  </span></span><span class="s3"><b>type </b></span>IdType <span class="s1">= </span>Int</p>
<p class="p6">}</p>
<p class="p5"><br></p>
<p class="p5"><br></p>
<p class="p1"><i>/**</i></p>
<p class="p1"><i><span class="Apple-converted-space"> </span>* Scala 3, explicit nulls</i></p>
<p class="p1"><i><span class="Apple-converted-space"> </span>*/</i></p>
<p class="p2"><i><span class="Apple-converted-space">  </span></i></p>
<p class="p10"><span class="s3"><b>val </b></span><b><i>definetelyString</i></b><span class="s1">: </span><span class="s8">String </span><span class="s1">= </span><span class="s2">"Hej"</span></p>
<p class="p4"><br></p>
<p class="p1"><i>//val someString: String = null // error: found `Null`,<span class="Apple-converted-space">  </span>but required `String`</i></p>
<p class="p1"><b>val </b><span class="s4"><b><i>couldBeAString</i></b></span><span class="s1">: </span><span class="s8">String </span><span class="s1">| </span><span class="s8">Null </span><span class="s1">= </span><b>null </b><i>// ok</i></p>
<p class="p2"><i></i><br></p>
<p class="p1"><span class="s4"><b><i>couldBeAString </i></b></span><span class="s1">== </span><b>null <span class="Apple-converted-space">      </span></b><i>// ok</i></p>
<p class="p1"><i>// definetelyStrig == null<span class="Apple-converted-space">    </span>error!</i></p>
<p class="p1"><i>// definetelyStrig eq null<span class="Apple-converted-space">    </span>error!</i></p>
<p class="p1"><i>// "hello" == null<span class="Apple-converted-space">            </span>error!</i></p>
<p class="p2"><i></i><br></p>
<p class="p1"><i>// Flow typing</i></p>
<p class="p2"><i></i><br></p>
<p class="p10"><span class="s3"><b>if </b></span><b><i>couldBeAString </i></b><span class="s1">!= </span><span class="s3"><b>null then </b></span><i>println</i><span class="s1">(</span><b><i>couldBeAString</i></b><span class="s1">.size)</span></p>
<p class="p5"><br></p>
<p class="p10"><i>assert</i><span class="s1">(</span><b><i>couldBeAString </i></b><span class="s1">!= </span><span class="s3"><b>null</b></span><span class="s1">)</span></p>
<p class="p10"><i>println</i><span class="s1">(</span><b><i>couldBeAString</i></b><span class="s1">.size)</span></p>
<p class="p5"><br></p>
<p class="p1"><i>/**</i></p>
<p class="p1"><i><span class="Apple-converted-space"> </span>* JDK 16, foreign linker API to replace JNI</i></p>
<p class="p1"><i><span class="Apple-converted-space"> </span>*/</i></p>
<p class="p2"><i></i><br></p>
<p class="p6"><span class="s6">var </span>libraryLookup = LibraryLookup.ofPath(Path.of( <span class="s2">"/home/me/helloworld.so"</span>));</p>
<p class="p6"><span class="s6">var </span>symbol = libraryLookup.lookup(<span class="s2">"helloworld"</span>).get();</p>
<p class="p6"><span class="s6">var </span>descriptor = FunctionDescriptor.ofVoid();</p>
<p class="p6"><span class="s6">var </span>methodType = MethodType.methodType(Void.<span class="s5"><i>TYPE</i></span>);</p>
<p class="p6"><span class="s6">var </span>methodHandle = CLinker.getInstance().downcallHandle(symbol.address(), methodType, descriptor);</p>
<p class="p6">methodHandle.invokeExact();</p>
<p class="p2"><i></i><br></p>
<p class="p1"><i>/**</i></p>
<p class="p1"><i><span class="Apple-converted-space"> </span>* JDK 16, records (preview since JDK 14).</i></p>
<p class="p1"><i><span class="Apple-converted-space"> </span>*/</i></p>
<p class="p2"><i></i><br></p>
<p class="p6"><span class="s11">public record</span> Node (<span class="s6">long </span>id, List&lt;String&gt; labels) {}</p>
<p class="p2"><i></i><br></p>
<p class="p16"><i></i><br></p>
<p class="p1"><i>/**</i></p>
<p class="p1"><i><span class="Apple-converted-space"> </span>* JDK 15, hidden classes</i></p>
<p class="p1"><i><span class="Apple-converted-space"> </span>*</i></p>
<p class="p1"><i><span class="Apple-converted-space"> </span>* The runtime will see an improvement in footprint and performance relative</i></p>
<p class="p1"><i><span class="Apple-converted-space"> </span>* to both ClassLoader::defineClass and Unsafe::defineAnonymousClass</i></p>
<p class="p1"><i><span class="Apple-converted-space"> </span>*/</i></p>
<p class="p16"><i></i><br></p>
<p class="p6"><span class="s6">byte</span>[] generatedByteCode = generateFusedPipeline();</p>
<p class="p5"><br></p>
<p class="p6">MethodHandles.Lookup lookup = MethodHandles.lookup();</p>
<p class="p6">Class&lt;?&gt; pipelineClass = lookup.defineHiddenClass(generatedByteCode, <span class="s6">true</span>, <span class="s5"><i>NESTMATE</i></span>).lookupClass();</p>
<p class="p5"><br></p>
<p class="p6"><span class="s6">var </span>constructor = pipelineClass.getConstructor();</p>
<p class="p6"><span class="s6">var </span>pipeline = (Pipeline) constructor.newInstance();</p>
<p class="p6">pipeline.operate();</p>
<p class="p2"><i></i><br></p>
<p class="p2"><i></i><br></p>
<p class="p17"><i>/**</i></p>
<p class="p17"><i><span class="Apple-converted-space"> </span>* JDK 16, Foreign-Memory Access API (incubator since JDK 14)</i></p>
<p class="p17"><i><span class="Apple-converted-space"> </span>*<span class="Apple-converted-space"> </span></i></p>
<p class="p17"><i><span class="Apple-converted-space"> </span>* Introduce an API to allow Java programs to safely and efficiently access<span class="Apple-converted-space"> </span></i></p>
<p class="p17"><i><span class="Apple-converted-space"> </span>* foreign memory outside of the Java heap.</i></p>
<p class="p17"><i><span class="Apple-converted-space"> </span>*/</i></p>
<p class="p16"><i></i><br></p>
<p class="p6">ValueLayout elementLayout = MemoryLayout.ofValueBits(<span class="s8">32</span>, ByteOrder.nativeOrder());</p>
<p class="p6">SequenceLayout intArrayLayout = MemoryLayout.ofSequence(<span class="s8">25</span>, elementLayout);</p>
<p class="p6">VarHandle handle = intArrayLayout.varHandle(<span class="s6">int</span>.<span class="s6">class</span>, MemoryLayout.PathElement.sequenceElement());</p>
<p class="p6"><span class="s6">try </span>(MemorySegment segment = MemorySegment.allocateNative(intArrayLayout)) {</p>
<p class="p6"><span class="Apple-converted-space">    </span><span class="s6">for </span>(<span class="s6">int </span>i = <span class="s8">0</span>; i &lt; intArrayLayout.elementCount().getAsLong(); i++) {</p>
<p class="p6"><span class="Apple-converted-space">        </span>handle.set(segment, (<span class="s6">long</span>) i, i*<span class="s8">2</span>);</p>
<p class="p6"><span class="Apple-converted-space">    </span>}</p>
<p class="p6">}</p>
<p class="p5"><br></p>
<p class="p17"><i>/*</i></p>
<p class="p17"><i><span class="Apple-converted-space"> </span>* JDK 16, Vector API</i></p>
<p class="p17"><i><span class="Apple-converted-space"> </span>*/</i></p>
<p class="p16"><i></i><br></p>
<p class="p6"><span class="s6">float </span>vanillaDotProduct(<span class="s6">float</span>[] left, <span class="s6">float</span>[] right) {</p>
<p class="p6"><span class="Apple-converted-space">    </span><span class="s6">var </span>sum = <span class="s8">0f</span>;</p>
<p class="p6"><span class="Apple-converted-space">    </span><span class="s6">for </span>(<span class="s6">int </span>i = <span class="s8">0</span>; i &lt; left.<span class="s7">length</span>; ++i) {</p>
<p class="p6"><span class="Apple-converted-space">        </span>sum = Math.fma(left[i], right[i], sum);</p>
<p class="p6"><span class="Apple-converted-space">    </span>}</p>
<p class="p6"><span class="Apple-converted-space">    </span><span class="s6">return </span>sum;</p>
<p class="p6">}</p>
<p class="p5"><br></p>
<p class="p6"><span class="s6">float </span>vectorDotProduct(<span class="s6">float</span>[] left, <span class="s6">float</span>[] right) {</p>
<p class="p6"><span class="Apple-converted-space">    </span><span class="s6">var </span>species = FloatVector.<span class="s5"><i>SPECIES_PREFERRED</i></span>;</p>
<p class="p6"><span class="Apple-converted-space">    </span><span class="s6">var </span>sum = FloatVector.zero(species);</p>
<p class="p6"><span class="Apple-converted-space">    </span><span class="s6">for </span>(<span class="s6">int </span>i = <span class="s8">0</span>; i &lt; left.<span class="s7">length</span>; i += sum.elementSize()) {</p>
<p class="p6"><span class="Apple-converted-space">        </span><span class="s6">var </span>l = FloatVector.fromArray(species, left, i);</p>
<p class="p6"><span class="Apple-converted-space">        </span><span class="s6">var </span>r = FloatVector.fromArray(species, right, i);</p>
<p class="p6"><span class="Apple-converted-space">        </span>sum = l.fma(r, sum);</p>
<p class="p6"><span class="Apple-converted-space">    </span>}</p>
<p class="p6"><span class="Apple-converted-space">    </span><span class="s6">return </span>sum.reduceLanes(<span class="s5"><i>ADD</i></span>);</p>
<p class="p6">}</p>
<p class="p2"><i></i><br></p>
<p class="p17"><i>/*</i></p>
<p class="p17"><i><span class="Apple-converted-space"> </span>* JDK 16, pattern matching of instanceof (preview since JDK 14)</i></p>
<p class="p17"><i><span class="Apple-converted-space"> </span>*/</i></p>
<p class="p16"><i></i><br></p>
<p class="p6"><span class="s6">void </span>patternMatching(Object matchMe) {</p>
<p class="p6"><span class="Apple-converted-space">    </span><span class="s6">if </span>(matchMe <span class="s6">instanceof </span>String s &amp;&amp; s.length() &gt; <span class="s8">5</span>) {</p>
<p class="p6"><span class="Apple-converted-space">        </span>System.<span class="s5"><i>out</i></span>.println(<span class="s2">"Match: " </span>+ s);</p>
<p class="p6"><span class="Apple-converted-space">    </span>}</p>
<p class="p6">}</p>
<p class="p2"><i></i><br></p>
<p class="p2"><i></i><br></p>
<p class="p17"><i>/*</i></p>
<p class="p17"><i><span class="Apple-converted-space"> </span>* JDK 16, sealed classes (preview since JDK 15)</i></p>
<p class="p17"><i><span class="Apple-converted-space"> </span>*</i></p>
<p class="p17"><i><span class="Apple-converted-space"> </span>*<span class="Apple-converted-space"> </span></i></p>
<p class="p17"><i><span class="Apple-converted-space"> </span>*/</i></p>
<p class="p2"><i></i><br></p>
<p class="p6"><span class="s6">sealed</span> <span class="s6">interface </span>AnyValue <span class="s6">permits</span> NodeValue, RelationshipValue { }</p>
<p class="p5"><br></p>
<p class="p6"><span class="s6">class </span>NodeValue <span class="s6">extends </span>AnyValue { }</p>
<p class="p6"><span class="s6">class </span>RelationshipValue <span class="s6">extends </span>AnyValue { }</p>
<p class="p2"><i></i><br></p>
<p class="p5"><br></p>
</body>
</html>
